Note 类是一个抽象类，因为它只是作为一个模型（模板）使用，不能被实例化。
由于方法 print 并没有在该类中定义（它将在派生类中定义），因此 print 是一个纯虚函数。

Article 和 Image 类继承自 Note 类。
NotesManager 类与 Note 类之间是组合关系（composition）。

⸻

练习 77 —— 记笔记（Prise de notes）

我们希望开发一个名为 MyNOTES 的应用程序，用于编辑和管理一组笔记（notes / 备忘录）。
这些笔记可以包含文本和/或图片。

一条笔记例如可以对应：
	•	一次会议的会议纪要
	•	或一堂课中记录的课堂笔记

⸻

问题 1 —— 一些简单的笔记作为开始……

一、总体说明

从实现的角度来看：
	•	一篇“笔记（article）”是 类 Note 的一个实例对象
	•	每个 Note 对象都由一个 标题 titre（类型为 string） 来描述
	•	方法 getTitre() 用于访问该标题

二、构造与显示
	•	Note 类只有一个构造函数
	•	参数类型为 const string&
	•	用于初始化标题
	•	方法

print(ostream& f)

用于将一个 Note 对象的信息输出到一个 ostream 流中

	•	print 的具体实现依赖于笔记的类型

⸻

三、目前区分两种类型的笔记

1️⃣ Article（文章）
	•	Article 是 Note 的一种
	•	表示 只包含文本的笔记
	•	除了 titre 之外，还包含：
	•	texte（类型 string）
	•	方法：
	•	getTexte()：访问文本内容
	•	构造函数：
	•	有两个 const string& 参数
	•	分别用于初始化标题和正文文本

⸻

2️⃣ Image（图片）
	•	Image 是 Note 的一种
	•	表示 图片或照片
	•	除了 titre 之外，还包含：
	•	description（string，描述图片内容）
	•	fichier（string，表示图片文件的物理路径）
	•	方法：
	•	getDescription()
	•	getFichier()
	•	构造函数：
	•	有 三个 const string& 参数
	•	用于初始化标题、描述和文件路径

⸻

四、NotesManager

在应用中：
	•	所有 Note 对象由一个名为 NotesManager 的模块进行管理
	•	该模块负责：
	•	Note 对象的创建
	•	Note 对象的销毁

⸻

五、文件结构与异常
	•	假设已经存在：
	•	头文件 notes.h
	•	源文件 notes.cpp
	•	每次回答需要写 C++ 代码时：
	•	请说明代码应写在哪个文件中
	•	异常处理：
	•	使用类 NotesException
	•	假定该类已经在 notes.h 文件开头定义好（无需实现）

其接口如下：

class NotesException {
public:
    NotesException(const string& str);
    string getInfo() const;
};


⸻

问题（Question 1）
	1.	已知 不能实例化 Note 类，说明 Note 类的特殊性是什么？
那么方法 print 的特殊性又是什么？
请说明理由。
	2.	Note 与 Article 之间是什么关系？
Note 与 Image 之间是什么关系？
Note 与 NotesManager 之间是什么关系？
	3.	画一个 UML 类图，展示上面所有类、它们的特性以及类之间的关系。
要尽量完整。
	4.	用 C++ 定义 Note 类：
	•	包含题目中提到的所有方法
	•	包含为遵守**里氏替换原则（LSP）**所需的所有方法
	5.	用 C++ 定义 Article 类：
	•	包含题目中提到的所有方法
	•	必须可以实例化 Article
	•	使得 NotesManager 能够创建 Article 对象

⸻

问题 2 —— ……再加上一些组合（Documents）

我们还决定创建一个 Document 类：
	•	Document 的实例是 Note 对象
	•	一个 Document 可以虚拟地组合多个 Note 对象
	•	从而形成内容更丰富、更大的笔记

一、Document 的结构
	•	Document 包含一个属性：

stack<Note*> notes

	•	该栈保存被组合的 Note 对象的地址

	•	生命周期说明：
	•	Document 的销毁 不会销毁 其包含的 Note 对象
	•	即：Document 与其中的 Note 对象 生命周期相互独立

二、方法
	•	构造函数：
	•	一个 const string& 参数
	•	用于初始化文档标题
	•	初始时：
	•	Document 不包含任何 Note
	•	方法：
	•	ajouterNote：向文档中加入一个 Note
	•	print 行为：
	•	先输出文档标题
	•	再依次输出构成文档的各条笔记

在接下来的问题中，假设 std::stack 具有迭代器
（尽管标准 STL 中 std::stack 实际并不提供迭代器）

⸻

问题（Question 2）
	1.	Document 类与 Note 类之间存在哪 两种关系？
	2.	画一个新的 UML 类图：
	•	包含 Note、Article、Image、Document
	•	以及它们之间的关系
	•	只需要画出相对于前一个 UML 新增的内容
	3.	用 C++ 定义 Document 类：
	•	实现题目中描述的所有方法
	4.	为了能在 不暴露 Document 内部数据结构 的前提下，
遍历 Document 中的所有 Note 对象，应当怎么做？
请定义实现该功能所需的一切内容。
	5.	现在假设 STL 中的 stack 类不存在。
请重新定义一个 stack 类，并尽量复用 STL 中的 list 类。
说明你在这里使用的是哪一种 设计模式（Design Pattern）。
你的 stack 类必须提供以下方法：
	•	push
	•	pop
	•	top
	•	empty
	•	size
并给出了 list 类的部分接口供你使用。

⸻

问题 3 —— ……再加一点“动态行为”

在实际中，NotesManager 负责 Note 对象的持久化：
	•	存储到文件
	•	或数据库中

一、状态变化描述
	•	一个 Note 对象刚创建时，处于状态：
“Enregistré”（已保存）
	•	当某个特性被修改时（事件称为 “Modification”）：
	•	进入状态 “Modifié”（已修改）
	•	在该状态下：
	•	每 60 秒自动保存到临时文件
	•	动作称为 saveInTemporaryFile()
	•	若用户显式保存（事件 “Enregistrement”）：
	•	对象返回到 “Enregistré”
	•	执行：
	•	save()
	•	删除临时文件 deleteTemporaryFile()

⸻

二、异常情况与恢复
	•	若程序崩溃或系统异常：
	•	用户可能没有显式保存
	•	但自动临时保存可能已经发生
	•	当应用重新打开某条笔记：
	•	若发现存在对应的临时文件（temporaryFile == true）
	•	笔记进入状态 “Rechargement”（重新加载）
	•	用户可选择：
	•	最后一次显式保存的版本
	•	或最后一次自动保存的版本
	•	选择事件称为 “Sélection”
	•	之后笔记返回到 “Enregistré”

⸻